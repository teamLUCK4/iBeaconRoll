FROM golang:1.21

# ğŸ‘‡ ëª¨ë“ˆ ì´ë¦„ì— ë§ì¶° ê²½ë¡œ ì„¤ì •
WORKDIR /go/src/iBeaconRoll-server

COPY go.mod .
COPY go.sum .
RUN go mod download

COPY . .

# ğŸ”¥ ë¹Œë“œ + ì‹¤í–‰ íŒŒì¼ ì¡´ì¬ í™•ì¸
RUN echo "ğŸ“¦ ë¹Œë“œ ì¤‘..." && go build -o server . && echo "âœ… build ok" && ls -l && ls -l server

# âœ… CMDê°€ ì •í™•í•œ ìœ„ì¹˜ì—ì„œ ./server ì‹¤í–‰ë˜ê²Œ ë³´ì¥
CMD ["/go/src/iBeaconRoll-server/server"]
